local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local TeleportService = game:GetService("TeleportService")
local HttpService = game:GetService("HttpService")
local player = Players.LocalPlayer
local placeId = game.PlaceId
local targetPosition = Vector3.new(-2959.9, 41.2, 2162.7)
local function doEAction()
    print("E action triggered")
end
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if input.KeyCode == Enum.KeyCode.E and not gameProcessed then
        doEAction()
    end
end)
local function teleportToRandomServer()
    local success, result = pcall(function()
        return HttpService:JSONDecode(
            game:HttpGetAsync(
                "https://games.roblox.com/v1/games/" .. placeId .. "/servers/Public?sortOrder=Asc&limit=100"
            )
        )
    end)

    if success and result and result.data then
        local servers = {}

        for _, server in pairs(result.data) do
            if server.playing < server.maxPlayers then
                table.insert(servers, server.id)
            end
        end

        if #servers > 0 then
            local randomServer = servers[math.random(1, #servers)]
            TeleportService:TeleportToPlaceInstance(placeId, randomServer, player)
        else
            warn("No available servers found.")
        end
    else
        warn("Failed to fetch servers.")
    end
end
local function moveCharacter(character)
    local hrp = character:WaitForChild("HumanoidRootPart")

    local tween = TweenService:Create(
        hrp,
        TweenInfo.new(2, Enum.EasingStyle.Linear),
        {CFrame = CFrame.new(targetPosition)}
    )

    tween:Play()
    tween.Completed:Wait()

    doEAction()

    task.wait(30)

    teleportToRandomServer()
end

if player.Character then
    moveCharacter(player.Character)
end

player.CharacterAdded:Connect(moveCharacter)
